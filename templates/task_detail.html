<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ activity.activity_title }} - Task Detail</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Nunito:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
<div class="task-detail-container">
  <!-- Header -->
  <div class="header">
    <a href="/activities/{{ area.id }}" class="back-btn">‚Üê Back</a>
    <h1>{{ activity.activity_title }}</h1>
  </div>
  
  <!-- Task Icon + Title -->
  <div class="task-header" style="background-color: {{ area.background_color }};">
    <div class="task-icon-large">{{ activity.activity_icon }}</div>
    <h2>{{ activity.activity_title }}</h2>
    <p>{{ activity.short_description }}</p>
    <div class="task-meta-info">
      <span class="duration">‚è±Ô∏è {{ activity.duration_min }} minutes</span>
      <span class="type">{{ area.development_type }}</span>
    </div>
  </div>
  
  <!-- Task Details -->
  <div class="task-details">
    
    <!-- Why It Helps -->
    {% if activity.why_it_helps %}
    <section class="detail-section">
      <h3>üí° Why it helps</h3>
      <p>{{ activity.why_it_helps }}</p>
    </section>
    {% endif %}
    
    <!-- You'll Need -->
    {% if activity.materials %}
    <section class="detail-section">
      <h3>üì¶ You'll need:</h3>
      <ul class="materials-list">
        {% for material in activity.materials|from_json %}
          <li>{{ material }}</li>
        {% endfor %}
      </ul>
    </section>
    {% endif %}
    
    <!-- How to Do It -->
    {% if activity.how_to %}
    <section class="detail-section">
      <h3>üéØ How to do it:</h3>
      <ol class="steps-list">
        {% for step in activity.how_to|from_json %}
          <li>{{ step }}</li>
        {% endfor %}
      </ol>
    </section>
    {% endif %}
    
    <!-- Safety Notes -->
    {% if activity.safety_notes %}
    <section class="detail-section safety-section">
      <h3>‚ö†Ô∏è Safety notes</h3>
      <p>{{ activity.safety_notes }}</p>
    </section>
    {% endif %}
    
    <!-- After the Activity -->
    {% if activity.reflection_prompt %}
    <section class="detail-section reflection-section">
      <h3>‚ú® After the activity</h3>
      <p>{{ activity.reflection_prompt }}</p>
    </section>
    {% endif %}
    
    <!-- Start Activity Button or Completed Badge -->
    <div class="action-buttons">
      {% if completed_today %}
      <div class="completed-message">
        <h4>‚úì Completed Today!</h4>
        <p>Great job! You already did this activity today. Feel free to do it again if you'd like! üíï</p>
        <button class="start-btn secondary" onclick="startTimer({{ activity.id }})">
          ‚ñ∂ Do It Again
        </button>
      </div>
      {% else %}
      <button class="start-btn" onclick="startTimer({{ activity.id }})">
        ‚ñ∂ Start Activity
      </button>
      {% endif %}
    </div>
  </div>
</div>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: "Poppins", "Nunito", "Inter", system-ui, sans-serif;
  background: #FDFAF5;
}

.task-detail-container {
  width: 100%;
  min-height: 100vh;
  padding: 0;
  margin: 0;
  background: #FDFAF5;
}

/* Header */
.header {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: white;
  border-bottom: 1px solid #E0E0E0;
  position: sticky;
  top: 0;
  z-index: 10;
}

.back-btn {
  color: #4CAF50;
  text-decoration: none;
  font-weight: 600;
  font-size: 16px;
  transition: all 300ms ease;
}

.back-btn:hover {
  color: #45a049;
}

.header h1 {
  color: #1A365D;
  font-size: 18px;
  margin: 0;
  font-weight: 600;
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Task Header */
.task-header {
  padding: 30px 20px;
  text-align: center;
  color: #1A365D;
}

.task-icon-large {
  font-size: 72px;
  margin-bottom: 16px;
  opacity: 0.9;
}

.task-header h2 {
  font-size: 24px;
  font-weight: 700;
  margin: 0 0 12px 0;
  line-height: 1.3;
}

.task-header p {
  font-size: 14px;
  margin: 0 0 16px 0;
  line-height: 1.5;
  opacity: 0.9;
}

.task-meta-info {
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
}

.task-meta-info span {
  background: rgba(255, 255, 255, 0.95);
  padding: 6px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
}

/* Task Details */
.task-details {
  padding: 20px 16px 40px 16px;
  max-width: 800px;
  margin: 0 auto;
}

.detail-section {
  background: white;
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 16px;
  border: 1px solid #E0E0E0;
}

.detail-section h3 {
  color: #1A365D;
  font-size: 16px;
  font-weight: 600;
  margin: 0 0 12px 0;
}

.detail-section p {
  color: #555;
  font-size: 14px;
  line-height: 1.6;
  margin: 0;
}

/* Materials List */
.materials-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.materials-list li {
  color: #555;
  font-size: 14px;
  line-height: 1.6;
  padding: 8px 0;
  padding-left: 28px;
  position: relative;
}

.materials-list li:before {
  content: "‚úì";
  position: absolute;
  left: 0;
  color: #4CAF50;
  font-weight: 600;
  font-size: 16px;
}

/* Steps List */
.steps-list {
  list-style: none;
  counter-reset: step-counter;
  padding: 0;
  margin: 0;
}

.steps-list li {
  color: #555;
  font-size: 14px;
  line-height: 1.6;
  padding: 12px 0;
  padding-left: 40px;
  position: relative;
  counter-increment: step-counter;
}

.steps-list li:before {
  content: counter(step-counter);
  position: absolute;
  left: 0;
  top: 12px;
  background: #4CAF50;
  color: white;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 12px;
}

/* Safety Section */
.safety-section {
  background: #FFF9E6;
  border-color: #FFD54F;
}

.safety-section h3 {
  color: #F57C00;
}

/* Reflection Section */
.reflection-section {
  background: #F0F9FF;
  border-color: #B3E5FC;
}

.reflection-section h3 {
  color: #0277BD;
}

/* Action Buttons */
.action-buttons {
  margin-top: 24px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.start-btn {
  background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
  color: white;
  border: none;
  padding: 16px 32px;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 300ms ease;
  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
  -webkit-tap-highlight-color: transparent;
}

.start-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
}

.start-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
}

.start-btn.secondary {
  background: linear-gradient(135deg, #90CAF9 0%, #64B5F6 100%);
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

.start-btn.secondary:hover {
  box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
}

/* Completed Message */
.completed-message {
  background: rgba(76, 175, 80, 0.1);
  border: 2px solid #4CAF50;
  border-radius: 12px;
  padding: 20px;
  text-align: center;
}

.completed-message h4 {
  color: #4CAF50;
  font-size: 18px;
  margin: 0 0 12px 0;
}

.completed-message p {
  color: #666;
  font-size: 14px;
  margin: 0 0 16px 0;
  line-height: 1.5;
}

/* Mobile Responsive */
@media (min-width: 768px) {
  .task-header {
    padding: 40px 30px;
  }
  
  .task-details {
    padding: 30px 24px 60px 24px;
  }
  
  .detail-section {
    padding: 24px;
  }
}

/* Touch Device Optimizations */
@media (hover: none) and (pointer: coarse) {
  .start-btn:hover {
    transform: none;
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .start-btn {
    transition: none;
  }
  
  .start-btn:hover {
    transform: none;
  }
}
</style>

<script>
function startTimer(activityId) {
  // Navigate to timer screen
  window.location.href = `/timer/${activityId}`;
}
</script>
</body>
</html>
