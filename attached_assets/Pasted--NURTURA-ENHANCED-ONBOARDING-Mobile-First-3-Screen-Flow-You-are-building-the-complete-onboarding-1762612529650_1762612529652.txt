# NURTURA ENHANCED ONBOARDING - Mobile-First 3-Screen Flow

You are building the complete onboarding experience for Nurtura using the warm, empathetic design system we've developed. This prompt enhances the Supabase OTP flow with Nurtura's signature visual language.

---

## ğŸ¯ GOAL

Deliver a **touch-friendly, emotionally warm onboarding experience** that:
- Feels like a mobile app (large buttons, generous spacing)
- Uses Nurtura's soft pastel color palette & typography
- Maintains the exact copy and journey structure
- Implements Supabase mobile OTP authentication
- Redirects to dashboard after verification

---

## ğŸ¨ NURTURA DESIGN SYSTEM

### Colors (Apply to Onboarding)
```
Primary Gradients:
- Soft Pink to Blue: from-rose-100 via-pink-100 to-blue-100
- Mint to Blue: from-green-50 to-blue-50
- Warm Cream: bg-white/cream

Accent Colors:
- Primary CTA: from-pink-300 to-rose-400 (gradient buttons)
- Secondary: from-mint-400 to-green-400
- Success: from-green-500

Text:
- Headers: text-gray-900 font-bold (Poppins/Nunito)
- Body: text-gray-700 (16px)
- Microcopy: text-gray-500 text-sm
```

### Typography
```
Font Stack: "Poppins", "Nunito", "Inter", system-ui, sans-serif
Headers: font-bold text-2xl md:text-3xl (emotional, warm)
Body: font-medium text-base md:text-lg (readable, accessible)
Microcopy: font-regular text-xs md:text-sm (conversational)
```

### Spacing & Layout
```
Base Unit: 4px (Tailwind default)
Card Padding: p-6 mobile, p-8 desktop
Border Radius: rounded-2xl (16px, soft)
Button Height: h-12 minimum (48px tap target)
Safe Area: pb-8 (mobile bottom nav clearance)
Max Width: max-w-sm (small screens first)
```

### Animations
```
Fade In: opacity 0 â†’ 1 over 500ms
Slide Up: translateY 20px â†’ 0 over 400ms
Button Tap: scale 0.98 on active
Loading: spinning gradient
Success: scale + confetti fade
```

---

## âš™ï¸ TECH SETUP

### Environment Variables
```
VITE_SUPABASE_URL=https://rhwvwvvwjwvtlxzqooii.supabase.co
VITE_SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### Utils: `/src/utils/supabaseClient.js`
```javascript
import { createClient } from '@supabase/supabase-js';

const supabase = createClient(
  import.meta.env.VITE_SUPABASE_URL,
  import.meta.env.VITE_SUPABASE_KEY
);

export default supabase;
```

### Install Dependencies
```bash
npm install @supabase/supabase-js framer-motion react-router-dom
```

---

## ğŸ“± SCREEN 1: WELCOME SCREEN

### Component: `/src/components/WelcomeScreen.jsx`

```jsx
import React from 'react';
import { useNavigate } from 'react-router-dom';
import { motion } from 'framer-motion';

export default function WelcomeScreen() {
  const navigate = useNavigate();

  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 0.6 }}
      className="min-h-screen bg-gradient-to-b from-rose-50 via-pink-50 to-blue-50 flex flex-col justify-between items-center p-6 pb-8 max-w-sm mx-auto"
    >
      {/* Top: Illustration (SVG Parent & Child) */}
      <motion.div
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ duration: 0.8, delay: 0.2 }}
        className="w-full h-40 flex items-center justify-center mt-8"
      >
        <svg
          viewBox="0 0 200 200"
          className="w-32 h-32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          {/* Parent (sitting) */}
          <circle cx="60" cy="40" r="15" fill="#E8B4C8" />
          <rect x="45" y="60" width="30" height="40" rx="5" fill="#F4D9E8" />
          <circle cx="50" cy="75" r="8" fill="#E8B4C8" />
          <circle cx="70" cy="75" r="8" fill="#E8B4C8" />
          
          {/* Baby (on parent's lap) */}
          <circle cx="85" cy="65" r="12" fill="#FFD9A8" />
          <circle cx="80" cy="60" r="3" fill="#333" />
          <circle cx="90" cy="60" r="3" fill="#333" />
          <path d="M85 63 Q80 65 85 67 Q90 65 85 63" fill="#FF9999" />
          <line x1="82" y1="78" x2="88" y2="78" stroke="#FFD9A8" strokeWidth="2" />
          
          {/* Heart between them */}
          <path
            d="M75 50 Q75 48 77 48 Q79 48 80 50 Q81 48 83 48 Q85 48 85 50 Q85 55 80 58 Q75 55 75 50"
            fill="#FF69B4"
            opacity="0.8"
          />
        </svg>
      </motion.div>

      {/* Center: Text Content */}
      <motion.div
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.8, delay: 0.4 }}
        className="text-center flex-1 flex flex-col justify-center"
      >
        <h1 className="text-2xl md:text-3xl font-bold text-gray-900 mb-3">
          Parenting's beautiful â€” and sometimes, hard.
        </h1>
        <p className="text-base md:text-lg text-gray-700 mb-6">
          Nurtura makes it easier, every day ğŸŒ¿
        </p>
        <p className="text-xs md:text-sm text-gray-500 mb-8">
          Growing with thousands of families â€” one joyful moment at a time ğŸ’•
        </p>
      </motion.div>

      {/* Bottom: CTA Button */}
      <motion.button
        whileHover={{ scale: 1.02 }}
        whileTap={{ scale: 0.98 }}
        onClick={() => navigate('/auth-phone')}
        className="w-full bg-gradient-to-r from-pink-300 to-rose-400 text-white font-bold text-lg h-12 rounded-2xl shadow-lg hover:shadow-xl transition-shadow"
      >
        Let's Begin â¤ï¸
      </motion.button>
    </motion.div>
  );
}
```

---

## ğŸ“± SCREEN 2: AUTH PHONE

### Component: `/src/components/AuthPhone.jsx`

```jsx
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { motion } from 'framer-motion';
import supabase from '../utils/supabaseClient';

export default function AuthPhone() {
  const navigate = useNavigate();
  const [phone, setPhone] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');

  const handleSendOTP = async () => {
    if (!phone || phone.length < 10) {
      setError('Please enter a valid mobile number');
      return;
    }

    setLoading(true);
    setError('');

    try {
      // Format phone number: ensure it starts with +
      const formattedPhone = phone.startsWith('+') ? phone : `+${phone}`;

      const { error: signInError } = await supabase.auth.signInWithOtp({
        phone: formattedPhone,
      });

      if (signInError) {
        setError(signInError.message || 'Failed to send OTP. Try again.');
        setLoading(false);
        return;
      }

      // Store phone for verification screen
      localStorage.setItem('nurtura_phone', formattedPhone);
      navigate('/auth-verify');
    } catch (err) {
      setError(err.message || 'Something went wrong');
      setLoading(false);
    }
  };

  const handleKeyPress = (e) => {
    if (e.key === 'Enter') handleSendOTP();
  };

  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 0.6 }}
      className="min-h-screen bg-gradient-to-b from-mint-50 via-blue-50 to-rose-50 flex flex-col justify-between items-center p-6 pb-8 max-w-sm mx-auto"
    >
      {/* Top: Headline + Icon */}
      <motion.div
        initial={{ opacity: 0, y: -10 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.6, delay: 0.2 }}
        className="text-center mt-12"
      >
        <div className="text-5xl mb-4">ğŸŒ¸</div>
        <h1 className="text-2xl md:text-3xl font-bold text-gray-900 mb-2">
          Sign in or join Nurtura
        </h1>
        <p className="text-gray-700 text-base md:text-lg mb-2">
          Enter your mobile number to begin your journey.
        </p>
      </motion.div>

      {/* Middle: Phone Input */}
      <motion.div
        initial={{ opacity: 0, scale: 0.95 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ duration: 0.6, delay: 0.3 }}
        className="w-full flex-1 flex flex-col justify-center"
      >
        {/* Phone Input */}
        <div className="mb-4">
          <input
            type="tel"
            placeholder="+1 (555) 123-4567"
            value={phone}
            onChange={(e) => {
              setPhone(e.target.value);
              setError('');
            }}
            onKeyPress={handleKeyPress}
            disabled={loading}
            className="w-full px-4 py-3 text-lg border-2 border-gray-200 rounded-2xl shadow-sm focus:outline-none focus:border-pink-300 focus:ring-2 focus:ring-pink-100 transition-all disabled:bg-gray-100"
          />
          {error && (
            <p className="text-red-500 text-xs mt-2 font-medium">{error}</p>
          )}
        </div>

        {/* CTA Button */}
        <motion.button
          whileHover={{ scale: loading ? 1 : 1.02 }}
          whileTap={{ scale: loading ? 1 : 0.98 }}
          onClick={handleSendOTP}
          disabled={loading}
          className={`w-full bg-gradient-to-r from-pink-300 to-rose-400 text-white font-bold text-lg h-12 rounded-2xl shadow-lg hover:shadow-xl transition-all mb-4 ${
            loading ? 'opacity-70 cursor-not-allowed' : ''
          }`}
        >
          {loading ? (
            <span className="flex items-center justify-center">
              <svg
                className="animate-spin h-5 w-5 mr-2"
                viewBox="0 0 24 24"
              >
                <circle
                  className="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="white"
                  strokeWidth="4"
                  fill="none"
                />
                <path
                  className="opacity-75"
                  fill="white"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                />
              </svg>
              Sending OTPâ€¦
            </span>
          ) : (
            'Send OTP ğŸ“©'
          )}
        </motion.button>

        {/* Microcopy */}
        <p className="text-xs text-gray-500 text-center">
          No passwords. No spam. Just gentle guidance made for you ğŸ’•
        </p>
      </motion.div>

      {/* Bottom: Empty */}
    </motion.div>
  );
}
```

---

## ğŸ“± SCREEN 3: AUTH VERIFY

### Component: `/src/components/AuthVerify.jsx`

```jsx
import React, { useState, useRef, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { motion } from 'framer-motion';
import supabase from '../utils/supabaseClient';

export default function AuthVerify() {
  const navigate = useNavigate();
  const [otp, setOtp] = useState(['', '', '', '', '', '']);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const [resendTimer, setResendTimer] = useState(20);
  const [canResend, setCanResend] = useState(false);
  const inputRefs = useRef([]);

  useEffect(() => {
    // Resend timer
    if (resendTimer > 0 && !canResend) {
      const timer = setTimeout(() => setResendTimer(resendTimer - 1), 1000);
      return () => clearTimeout(timer);
    } else if (resendTimer === 0) {
      setCanResend(true);
    }
  }, [resendTimer, canResend]);

  const handleOtpChange = (index, value) => {
    if (!/^\d*$/.test(value)) return; // Only numbers
    const newOtp = [...otp];
    newOtp[index] = value;
    setOtp(newOtp);

    // Auto-focus next input
    if (value && index < 5) {
      inputRefs.current[index + 1]?.focus();
    }
  };

  const handleKeyDown = (index, e) => {
    if (e.key === 'Backspace' && !otp[index] && index > 0) {
      inputRefs.current[index - 1]?.focus();
    }
  };

  const handleVerify = async () => {
    const otpCode = otp.join('');
    if (otpCode.length !== 6) {
      setError('Please enter all 6 digits');
      return;
    }

    setLoading(true);
    setError('');

    try {
      const phone = localStorage.getItem('nurtura_phone');
      const { error: verifyError } = await supabase.auth.verifyOtp({
        phone,
        token: otpCode,
        type: 'sms',
      });

      if (verifyError) {
        setError(verifyError.message || 'Invalid OTP. Please try again.');
        setLoading(false);
        return;
      }

      // Show success animation
      setTimeout(() => {
        localStorage.removeItem('nurtura_phone');
        navigate('/home'); // Redirect to dashboard/home
      }, 1000);
    } catch (err) {
      setError(err.message || 'Verification failed');
      setLoading(false);
    }
  };

  const handleResend = async () => {
    setResendTimer(20);
    setCanResend(false);
    const phone = localStorage.getItem('nurtura_phone');
    await supabase.auth.signInWithOtp({ phone });
  };

  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 0.6 }}
      className="min-h-screen bg-gradient-to-b from-rose-50 via-pink-50 to-blue-50 flex flex-col justify-between items-center p-6 pb-8 max-w-sm mx-auto"
    >
      {/* Top: Headline + Icon */}
      <motion.div
        initial={{ opacity: 0, y: -10 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.6, delay: 0.2 }}
        className="text-center mt-12"
      >
        <div className="text-5xl mb-4">ğŸŒ±</div>
        <h1 className="text-2xl md:text-3xl font-bold text-gray-900 mb-2">
          Let's unlock your child's next milestone together
        </h1>
        <p className="text-gray-700 text-base md:text-lg">
          Enter the 6-digit code we sent to your phone.
        </p>
      </motion.div>

      {/* Middle: OTP Input */}
      <motion.div
        initial={{ opacity: 0, scale: 0.95 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ duration: 0.6, delay: 0.3 }}
        className="w-full flex-1 flex flex-col justify-center"
      >
        {/* OTP Boxes */}
        <div className="grid grid-cols-6 gap-2 mb-6">
          {otp.map((digit, index) => (
            <input
              key={index}
              ref={(el) => (inputRefs.current[index] = el)}
              type="text"
              maxLength="1"
              value={digit}
              onChange={(e) => handleOtpChange(index, e.target.value)}
              onKeyDown={(e) => handleKeyDown(index, e)}
              disabled={loading}
              className="w-full h-14 text-center text-xl font-bold border-2 border-gray-200 rounded-lg focus:outline-none focus:border-pink-300 focus:ring-2 focus:ring-pink-100 transition-all disabled:bg-gray-100"
            />
          ))}
        </div>

        {/* Error Message */}
        {error && (
          <p className="text-red-500 text-xs font-medium mb-4 text-center">
            {error}
          </p>
        )}

        {/* Verify Button */}
        <motion.button
          whileHover={{ scale: loading ? 1 : 1.02 }}
          whileTap={{ scale: loading ? 1 : 0.98 }}
          onClick={handleVerify}
          disabled={loading}
          className={`w-full bg-gradient-to-r from-pink-400 to-rose-400 text-white font-bold text-lg h-12 rounded-2xl shadow-lg hover:shadow-xl transition-all mb-4 ${
            loading ? 'opacity-70 cursor-not-allowed' : ''
          }`}
        >
          {loading ? (
            <span className="flex items-center justify-center">
              <svg className="animate-spin h-5 w-5 mr-2" viewBox="0 0 24 24">
                <circle
                  className="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="white"
                  strokeWidth="4"
                  fill="none"
                />
                <path
                  className="opacity-75"
                  fill="white"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                />
              </svg>
              Verifyingâ€¦
            </span>
          ) : (
            'Verify & Continue ğŸ’«'
          )}
        </motion.button>

        {/* Resend Link */}
        <div className="text-center">
          {canResend ? (
            <button
              onClick={handleResend}
              className="text-pink-500 text-xs font-medium hover:text-pink-600 transition-colors"
            >
              Didn't get it? Resend now
            </button>
          ) : (
            <p className="text-gray-500 text-xs">
              Didn't get it? Resend in {resendTimer}s
            </p>
          )}
        </div>
      </motion.div>

      {/* Bottom: Footer */}
      <motion.p
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ duration: 0.6, delay: 0.6 }}
        className="text-center text-xs md:text-sm text-gray-500"
      >
        You're in â€” welcome to calmer, happier parenting ğŸ’•
      </motion.p>
    </motion.div>
  );
}
```

---

## ğŸ”€ ROUTING: App.jsx

```jsx
import React, { useState, useEffect } from 'react';
import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import WelcomeScreen from './components/WelcomeScreen';
import AuthPhone from './components/AuthPhone';
import AuthVerify from './components/AuthVerify';
import Dashboard from './components/Dashboard'; // Placeholder or your existing home page
import supabase from './utils/supabaseClient';

export default function App() {
  const [session, setSession] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // Check current session
    supabase.auth.getSession().then(({ data: { session } }) => {
      setSession(session);
      setLoading(false);
    });

    // Listen for auth state changes
    const {
      data: { subscription },
    } = supabase.auth.onAuthStateChange((_event, session) => {
      setSession(session);
    });

    return () => subscription?.unsubscribe();
  }, []);

  if (loading) {
    return (
      <div className="min-h-screen bg-gradient-to-b from-rose-50 to-blue-50 flex items-center justify-center">
        <div className="text-center">
          <div className="text-5xl mb-4">ğŸŒ¿</div>
          <p className="text-gray-600">Loading Nurtura...</p>
        </div>
      </div>
    );
  }

  return (
    <Router>
      <Routes>
        {!session ? (
          <>
            <Route path="/" element={<WelcomeScreen />} />
            <Route path="/auth-phone" element={<AuthPhone />} />
            <Route path="/auth-verify" element={<AuthVerify />} />
            <Route path="*" element={<Navigate to="/" replace />} />
          </>
        ) : (
          <>
            <Route path="/home" element={<Dashboard />} />
            <Route path="*" element={<Navigate to="/home" replace />} />
          </>
        )}
      </Routes>
    </Router>
  );
}
```

---

## ğŸ¨ TAILWIND CONFIG ENHANCEMENT

Add to `tailwind.config.js`:

```javascript
module.exports = {
  theme: {
    extend: {
      colors: {
        'nurtura-pink': '#F4D9E8',
        'nurtura-blue': '#D6E8F7',
        'nurtura-mint': '#D4F1E4',
        'nurtura-cream': '#FDFAF5',
      },
      fontFamily: {
        sans: ['Poppins', 'Nunito', 'Inter', 'system-ui', 'sans-serif'],
      },
    },
  },
};
```

---

## âœ… IMPLEMENTATION CHECKLIST

- [ ] Install dependencies: `npm install @supabase/supabase-js framer-motion react-router-dom`
- [ ] Create `/src/utils/supabaseClient.js`
- [ ] Create `/src/components/WelcomeScreen.jsx`
- [ ] Create `/src/components/AuthPhone.jsx`
- [ ] Create `/src/components/AuthVerify.jsx`
- [ ] Create `/src/components/Dashboard.jsx` (placeholder or link to existing home)
- [ ] Update `App.jsx` with routing logic
- [ ] Update `tailwind.config.js` with Nurtura colors + fonts
- [ ] Test on mobile (375-430px width)
- [ ] Test Supabase OTP flow end-to-end
- [ ] Deploy to Replit

---

## ğŸš€ TESTING FLOW

1. **Welcome Screen**: Click "Let's Begin â¤ï¸" â†’ navigates to `/auth-phone`
2. **Auth Phone**: Enter phone â†’ Click "Send OTP ğŸ“©" â†’ Supabase sends SMS
3. **Auth Verify**: Enter 6-digit code â†’ Click "Verify & Continue ğŸ’«" â†’ redirects to `/home`
4. **Dashboard**: User is authenticated and lands on home screen

---

## ğŸ“ DESIGN SPECS

| Element | Spec |
|---------|------|
| Max Width | `max-w-sm` (384px) |
| Mobile Viewport | 375-430px |
| Button Height | `h-12` (48px tap target) |
| Border Radius | `rounded-2xl` (16px) |
| Padding | `p-6` (24px) |
| Font | Poppins/Nunito, medium weight |
| Animation Duration | 400-800ms fade/slide |
| Colors | Nurtura's soft pastels (rose, pink, blue, mint) |

---

## ğŸ’¡ NURTURA TONE THROUGHOUT

âœ… Warm, empathetic copy (exact as specified)  
âœ… Soft color gradients (no harsh colors)  
âœ… Large touch targets (minimum 48px)  
âœ… Generous spacing (thumb-friendly)  
âœ… Smooth animations (Framer Motion)  
âœ… Accessible on all mobile sizes  
âœ… Emotional connection through design & copy  

---

## ğŸ¯ READY TO BUILD?

This prompt is production-ready. Paste it into Replit and it will generate:
- âœ… 3 fully functional onboarding screens
- âœ… Supabase mobile OTP authentication
- âœ… Nurtura's signature design language
- âœ… Mobile-first responsive layout
- âœ… Smooth animations & interactions
- âœ… Error handling & loading states

**Your onboarding is ready to launch!** ğŸŒ¿ğŸ’•